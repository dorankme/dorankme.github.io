!function(e){"use strict";var t={};t.backToTop=function(){var t=$("#back-to-top");$(e).scroll(function(){$(e).scrollTop()>100?t.fadeIn(1e3):t.fadeOut(1e3)}),t.click(function(){$("body,html").animate({scrollTop:0})})},t.mobileNavbar=function(){var e=$("#mobile-navbar"),t=$(".mobile-navbar-icon"),o=new Slideout({panel:document.getElementById("mobile-panel"),menu:document.getElementById("mobile-menu"),padding:180,tolerance:70});o.disableTouch(),t.click(function(){o.toggle()}),o.on("beforeopen",function(){e.addClass("fixed-open"),t.addClass("icon-click").removeClass("icon-out")}),o.on("beforeclose",function(){e.removeClass("fixed-open"),t.addClass("icon-out").removeClass("icon-click")}),$("#mobile-panel").on("touchend",function(){o.isOpen()&&t.click()})},t.toc=function(){var t=20,o=$(".post-toc"),n=$(".post-footer");if(o.length){var i=o.offset().top-t,c=n.offset().top-o.height()-t,a={start:{position:"absolute",top:i},process:{position:"fixed",top:t},end:{position:"absolute",top:c}};$(e).scroll(function(){var t=$(e).scrollTop();t<i?o.css(a.start):t>c?o.css(a.end):o.css(a.process)})}var s=30,l=$(".toc-link"),r=$(".headerlink"),f=$.map(r,function(e){return $(e).offset().top});$(e).scroll(function(){for(var t=$(e).scrollTop(),o=0;o<l.length;o++){var n=o+1===l.length,i=f[o]-s,c=n?1/0:f[o+1]-s;i<t&&t<=c?$(l[o]).addClass("active"):$(l[o]).removeClass("active")}})},t.fancybox=function(){$.fancybox&&($(".post").each(function(){$(this).find("img").each(function(){$(this).wrap('<a class="fancybox" href="'+this.src+'" title="'+this.alt+'"></a>')})}),$(".fancybox").fancybox({openEffect:"elastic",closeEffect:"elastic"}))},t.visits=function(){function e(e,t){var o=e.text()+" "+t;e.text(o)}function t(t){var o=new AV.Query(t),i=n.data("url").trim(),c=n.data("title").trim();o.equalTo("url",i),o.find().then(function(o){if(o.length>0){var a=o[0];a.save(null,{fetchWhenSave:!0}).then(function(e){return e.increment("time",1),e.save()}).then(function(t){e(n,t.get("time"))})}else{var s=new t;s.set("title",c),s.set("url",i),s.set("time",1),s.save().then(function(t){e(n,s.get("time"))})}},function(e){console.log("Error:"+e.code+" "+e.message)})}function o(t){n.each(function(){var o=$(this),n=new AV.Query(t),i=o.data("url").trim();n.equalTo("url",i),n.find().then(function(t){if(0===t.length)e(o,0);else{var n=t[0];e(o,n.get("time"))}},function(e){console.log("Error:"+e.code+" "+e.message)})})}var n=$(".post-visits");if("object"==typeof AV){var i=AV.Object.extend("Counter");1===n.length?t(i):o(i)}},e.Even=t}(window);